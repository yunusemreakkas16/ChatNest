<div class="friend-request-page">

  <!-- Header -->
  <div class="chat-header">
    <h3 class="chat-title">Friend Requests</h3>
    <div class="header-actions">
      <button class="header-btn" routerLink="/friendship/list">ğŸ‘¥ Friends</button>
      <button class="header-btn" routerLink="/chats">ğŸ’¬ Chats</button>
    </div>
  </div>

  <!-- Tab Indicator -->
  <div class="tab-bar">
    <button [class.active]="activeTab === 'Received'" (click)="switchTab('Received')">ğŸ“¥ Received</button>
    <button [class.active]="activeTab === 'Sent'" (click)="switchTab('Sent')">ğŸ“¤ Sent</button>
  </div>

  <!-- Status Message -->
  @if (statusMessage) {
    <div
      [ngClass]="statusType === 'success' ? 'success-message' : 'error-message'"
      class="status-banner">
      {{ statusMessage }}
    </div>
  }

  <!-- Requests List -->
  <div class="request-list">
    @if (requests.length === 0 && !statusMessage) {
      <div class="empty-message">
        No {{ activeTab }} requests.
      </div>
    }

    @for (req of requests; track req) {
      <div class="request-item">
        <div class="request-info">
          <div class="request-name">{{ req.name }}</div>
          <div class="request-email">{{ req.email }}</div>
          <div class="request-status">Status: {{ req.friendShipStatus }}</div>
        </div>
        <div class="request-actions">
          <!-- Accept, Reject for Received -->
          @if (activeTab === 'Received' && req.requesterID) {
            <button
              (click)="AcceptRequestAsync(req.requesterID!)"
            class="accept-btn">Accept</button>
          }
          @if (activeTab === 'Received' && req.requesterID) {
            <button
              (click)="RejectRequestAsync(req.requesterID!)"
            class="reject-btn">Reject</button>
          }
          <!-- Cancel for Sent -->
          @if (activeTab === 'Sent') {
            <button
              (click)="CancelRequestAsync(req.receiverID!)"
            class="cancel-btn">Cancel</button>
          }
        </div>
      </div>
    }
  </div>

</div>